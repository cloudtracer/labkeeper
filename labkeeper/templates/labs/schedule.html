{% extends '_base.html' %}
{% load tz %}

{% block headextra %}
<style type="text/css">
#schedule {
  width: 870px;
}
div.schedrow {
  clear: left;
}
div.schedend {
  clear: both;
  padding-top: 6px;
  text-align: center;
}
div.cell {
  border-bottom: 1px solid #c0c0c0;
  border-right: 1px solid #c0c0c0;
  display: block;
  float: left;
  height: 24px;
  width: 112px; /* (pod.width + pod.left-padding) * pod_count + 4 */
}
div.closed div.cell:not(.hour) {
  background-color: #d0d0d0;
}
div.day {
  border-right: 1px solid #ffffff;
  text-align: center;
}
div.hour {
  border-bottom: none;
  font-size: 80%;
  height: 25px;
  padding-right: 4px;
  text-align: right;
  width: 50px;
}
div.pod {
  float: left;
  height: 20px;
  padding: 4px 0px 0px 4px;
  position: relative;
}
div.podof4 {
  width: 23px;
}
div.podof3 {
  width: 32px;
}
div.podof2 {
  width: 50px;
}
div.podof1 {
  width: 104px;
}
div.pod1 div.block {
  background-color: blue;
}
div.pod2 div.block {
  background-color: orange;
}
div.pod3 div.block {
  background-color: green;
}
div.pod4 div.block {
  background-color: red;
}
div.block {
  border-radius: 8px;
  color: #ffffff;
  display: block;
  float: left;
  width: 100%;
}
div.block a {
  display: block;
  position: relative;
  height: 100%;
  width: 100%;
  z-index: 1000;
}
div.hours1 {
  height: 17px;	/* 1*25-8 */
}
div.hours2 {
  height: 42px;	/* 2*25-8 */
}
div.hours3 {
  height: 67px;	/* 3*25-8 */
}
div.hours4 {
  height: 92px;	/* 4*25-8 */
}
div.hours5 {
  height: 117px;	/* 5*25-8 */
}
div.hours6 {
  height: 142px;	/* 6*25-8 */
}
div.wrap {
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;
}
div.unwrap {
  border-top-left-radius: 0;
  border-top-right-radius: 0;
}
</style>
{% endblock %}

{% block content %}
{% include 'labs/_nav_header.html' %}
<div class="container">
  <div class="row">
    <div class="span3">
      <p>Reservation form goes here</p>
    </div>
    <div class="span9">
      <div id="schedule">
        <div class="schedrow">
          <div class="cell day hour"></div>
          {% for d in s.get_weekdays %}
          <div class="cell day">{{ d }}</div>
          {% endfor %}
        </div>
        {% for hour, days in s.schedule.items %}
        <div class="schedrow{% if hour not in lab.open_hours %} closed{% endif %}">
          <div class="cell hour">{{ hour }}:00</div>
          {% for day, pods in days.items %}
          <div class="cell">
            {% for pod, block in pods.items %}
            <div class="pod podof{{ pods|length }} pod{{ pod }}">
              {% if block %}
              <div class="block hours{{ block.duration }}{% if block.wrap %} wrap{% elif block.unwrap %} unwrap{% endif %}"><a href="{{ block.url }}"></a></div>
              {% endif %}
            </div>
            {% endfor %}
          </div>
          {% endfor %}
        </div>
        {% endfor %}
      </div>
      <div class="schedend">Current time: {{ current_time|localtime }} ({{ TIME_ZONE }})</div>
      </div>
    </div>
  </div>
{% endblock %}
